!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).modelz=e()}(this,function(){"use strict";function s(){}function n(t){return t}function e(t){return{}.toString.call(t)}function g(t){return null!==t&&"[object Object]"===e(t)}function l(t){return"[object Array]"==e(t)}function p(t){return"function"==typeof t}function d(t){return"string"==typeof t}var y={constructor:n,required:!1},t={castString:!0,parseNumbers:!0,onChangeListener:function(){return s},extraProperties:!1,embedPlainData:!0,preInit:n,postInit:n,types:{}};return function(c){function a(t,e){var r=Object.assign({string:function(t){if(d(t))return t;if(c.castString)return""+t;throw Error('Expect a string for "'+e+'", got "'+t+'"')},number:function(t){if("number"==typeof t)return t;if(d(t)&&c.parseNumbers)return parseFloat(t);throw Error('Expect a number for "'+e+'", got "'+t+'"')},boolean:function(t){return!!t},array:function(t){return[].concat(t)},object:function(t){return Object.assign({},t)},date:function(t){return new Date(t)},identity:n},c.types);if(p(t))return t;if(null==r[t])throw Error('Try to use unknown type "'+t+'" as type for "'+e+'"');return r[t]}return c=Object.assign({},t,c),function(f,n){return n=Object.assign({},c,n),function(t){void 0===t&&(t={});var o={},u=s,i={};n.extraProperties&&(i=Object.assign({},t)),n.embedPlainData&&(i._data=o),i=n.preInit(i),u=n.onChangeListener(i);var e=function(r){if(f.hasOwnProperty(r)){var n=Object.assign({},y,function(e,t){if(l(e)&&2===e.length){var r=e[0],n=e[1];return{constructor:a(r,t),required:n}}if(l(e)&&3===e.length){var o=e[0],u=e[1],i=e[2];return{constructor:a(o,t),required:u,default:i}}if(p(e))return{constructor:e};if(g(e)&&p(e.get))return{getCacheKey:s,get:e.get,set:e.set};if(g(e)&&l(e.get)&&p(e.get[0])&&(p(e.get[1])||l(e.get[1])))return{getCacheKey:l(e.get[1])?(f=e.get[1],function(e){return f.map(function(t){return e[t]}).join("|<3|")}):e.get[1],get:e.get[0],set:e.set};var f;if(d(e))try{return{constructor:a(e,t)}}catch(t){}try{return{constructor:a(typeof e,t),required:!0,default:e}}catch(t){throw new Error("No proper config handler found for config:\n"+JSON.stringify(e))}}(f[r],r));if(t.hasOwnProperty(r))null==t[r]?o[r]=t[r]:o[r]=n.constructor(t[r],i);else if(null===n.default)o[r]=n.default;else if(n.hasOwnProperty("default"))o[r]=n.constructor(n.default,i);else if(n.required)throw Error("No value set for "+r);Object.defineProperty(i,r,{enumerable:!p(n.get),get:function(){if(n.get){var t=n.getCacheKey(i);return o.hasOwnProperty(r)&&null!=t&&t===o[r].key||(o[r]={key:t,value:n.get(i)}),o[r].value}return i._data[r]},set:function(t){var e=i[r];p(n.set)?n.set(i,t):o[r]=t,u(r,t,e)}})}};for(var r in f)e(r);return i=n.postInit(i),c.extraProperties||Object.seal(i),i}}}});
//# sourceMappingURL=modelz.min.js.map
