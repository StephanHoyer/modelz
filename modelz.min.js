!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).modelz=t()}(this,function(){"use strict";function b(){}function n(e){return e}function s(e){return{}.toString.call(e)}function l(e){return"[object Array]"==s(e)}function p(e){return"function"==typeof e}function y(e){return"string"==typeof e}var h={construct:n,getCacheKey:b,enumerable:!0,required:!1},e={castString:!0,parseNumbers:!0,onChangeListener:function(){return b},extraProperties:!1,embedPlainData:!0,preInit:n,postInit:n,types:{}};return function(d){function f(e,t){var r=Object.assign({string:function(e){if(y(e))return e;if(d.castString)return""+e;throw Error('Expect a string for "'+t+'", got "'+e+'"')},number:function(e){if("number"==typeof e)return e;if(y(e)&&d.parseNumbers)return parseFloat(e);throw Error('Expect a number for "'+t+'", got "'+e+'"')},boolean:function(e){return!!e},array:function(e){return[].concat(e)},object:function(e){return Object.assign({},e)},date:function(e){return new Date(e)},identity:n},d.types);if(p(e))return e;if(null==r[e])throw Error('Try to use unknown type "'+e+'" as type for "'+t+'"');return r[e]}function g(t,e){if(null!==(n=t)&&"[object Object]"===s(n)){if(p(t.construct))return t;if(y(t.type))return Object.assign({construct:f(t.type,e)},t);if(p(t.get))return{getCacheKey:l((r=t).cacheKey)?function(t){return r.cacheKey.map(function(e){return t[e]}).join("|<3|")}:p(r.cacheKey)?r.cacheKey:b,get:t.get,set:t.set,enumerable:t.enumerable||!1}}var r,n;if(l(t)&&2===t.length){var u=t[0],i=t[1];return{construct:f(u,e),required:i}}if(l(t)&&3===t.length){var o=t[0],c=t[1],a=t[2];return{construct:f(o,e),required:c,default:a}}if(p(t))return{construct:t};if(y(t))try{return{construct:f(t,e)}}catch(e){}try{return{construct:f(typeof t,e),required:!0,default:t}}catch(e){throw new Error("No proper config handler found for config:\n"+JSON.stringify(t))}}return d=Object.assign({},e,d),function(a,f){var s=(f=Object.assign({},d,f)).name?f.name:"instance",l={modelName:s};return function(e){if(void 0===e&&(e={}),d.debug&&d.debug.extend("create")("constructing "+s+" with data %O",e),e._schema===l)return e;var u={},i=b,o={};if(f.extraProperties)o=Object.assign({},e);else if(d.debug){var t=Object.keys(a),r=Object.keys(e).filter(function(e){return!t.includes(e)});r.length&&d.debug.extend("warn")("The properties %o are not defined on target "+s+" and will therefore be dropped.",r)}f.embedPlainData&&Object.defineProperty(o,"_data",{get:function(){return u},enumerable:!1}),Object.defineProperty(o,"_isInitialized",{get:function(){return!0},enumerable:!1}),Object.defineProperty(o,"_schema",{get:function(){return l},enumerable:!1}),o=f.preInit(o),i=f.onChangeListener(o);function n(r){var n=Object.assign({},h,g(a[r],r));if(Object.defineProperty(o,r,{enumerable:n.enumerable,get:function(){if(n.get){var e=n.getCacheKey(o);return u.hasOwnProperty(r)&&null!=e&&e===u[r].key||(u[r]={key:e,value:n.get(o)}),u[r].value}return o._data[r]},set:function(e){var t=o[r];p(n.set)?n.set(o,e):n.required||null!=e?u[r]=n.construct(e,o,n):u[r]=e=null,i(r,e,t)}}),null!=e[r])o[r]=e[r];else if(n.hasOwnProperty("default"))p(n.default)?o[r]=n.default(e):o[r]=n.default;else{if(n.required)throw Error("No value set for "+r);n.get||(o[r]=null)}}for(var c in a)n(c);return o=f.postInit(o),d.extraProperties||Object.seal(o),o}}}});
//# sourceMappingURL=modelz.min.js.map
