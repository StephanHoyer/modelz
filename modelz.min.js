!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).modelz=e()}(this,function(){"use strict";function g(){}function n(t){return t}function l(t){return{}.toString.call(t)}function p(t){return"[object Array]"==l(t)}function y(t){return"function"==typeof t}function d(t){return"string"==typeof t}var b={construct:n,getCacheKey:g,enumerable:!0,required:!1},t={castString:!0,parseNumbers:!0,onChangeListener:function(){return g},extraProperties:!1,embedPlainData:!0,preInit:n,postInit:n,types:{}};return function(f){function a(t,e){var r=Object.assign({string:function(t){if(d(t))return t;if(f.castString)return""+t;throw Error('Expect a string for "'+e+'", got "'+t+'"')},number:function(t){if("number"==typeof t)return t;if(d(t)&&f.parseNumbers)return parseFloat(t);throw Error('Expect a number for "'+e+'", got "'+t+'"')},boolean:function(t){return!!t},array:function(t){return[].concat(t)},object:function(t){return Object.assign({},t)},date:function(t){return new Date(t)},identity:n},f.types);if(y(t))return t;if(null==r[t])throw Error('Try to use unknown type "'+t+'" as type for "'+e+'"');return r[t]}function s(e,t){if(null!==(n=e)&&"[object Object]"===l(n)){if(y(e.construct))return e;if(d(e.type))return Object.assign({construct:a(e.type,t)},e);if(p(e.get)&&y(e.get[0])&&(y(e.get[1])||p(e.get[1])))return{getCacheKey:p(e.get[1])?(r=e.get[1],function(e){return r.map(function(t){return e[t]}).join("|<3|")}):e.get[1],get:e.get[0],set:e.set};if(y(e.get))return{getCacheKey:g,get:e.get,set:e.set}}var r,n;if(p(e)&&2===e.length){var u=e[0],o=e[1];return{construct:a(u,t),required:o}}if(p(e)&&3===e.length){var i=e[0],c=e[1],f=e[2];return{construct:a(i,t),required:c,default:f}}if(y(e))return{construct:e};if(d(e))try{return{construct:a(e,t)}}catch(t){}try{return{construct:a(typeof e,t),required:!0,default:e}}catch(t){throw new Error("No proper config handler found for config:\n"+JSON.stringify(e))}}return f=Object.assign({},t,f),function(c,n){return n=Object.assign({},f,n),function(t){void 0===t&&(t={});var u={},o=g,i={};n.extraProperties&&(i=Object.assign({},t)),n.embedPlainData&&Object.defineProperty(i,"_data",{get:function(){return u},enumerable:!1}),i=n.preInit(i),o=n.onChangeListener(i);var e=function(r){if(c.hasOwnProperty(r)){var n=Object.assign({},b,s(c[r],r));if(t.hasOwnProperty(r))null==t[r]?u[r]=t[r]:u[r]=n.construct(t[r],i);else if(null===n.default)u[r]=n.default;else if(n.hasOwnProperty("default"))u[r]=n.construct(n.default,i);else if(n.required)throw Error("No value set for "+r);Object.defineProperty(i,r,{enumerable:!y(n.get)&&n.enumerable,get:function(){if(n.get){var t=n.getCacheKey(i);return u.hasOwnProperty(r)&&null!=t&&t===u[r].key||(u[r]={key:t,value:n.get(i)}),u[r].value}return i._data[r]},set:function(t){var e=i[r];y(n.set)?n.set(i,t):u[r]=n.construct(t),o(r,t,e)}})}};for(var r in c)e(r);return i=n.postInit(i),f.extraProperties||Object.seal(i),i}}}});
//# sourceMappingURL=modelz.min.js.map
