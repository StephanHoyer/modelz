!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).modelz=t()}(this,function(){"use strict";function l(){}function n(e){return e}function g(e){return{}.toString.call(e)}function d(e){return"[object Array]"==g(e)}function p(e){return"function"==typeof e}function b(e){return"string"==typeof e}var y={construct:n,getCacheKey:l,enumerable:!0,required:!1},e={castString:!0,parseNumbers:!0,onChangeListener:function(){return l},extraProperties:!1,embedPlainData:!0,preInit:n,postInit:n,types:{}};return function(f){function a(e,t){var r=Object.assign({string:function(e){if(b(e))return e;if(f.castString)return""+e;throw Error('Expect a string for "'+t+'", got "'+e+'"')},number:function(e){if("number"==typeof e)return e;if(b(e)&&f.parseNumbers)return parseFloat(e);throw Error('Expect a number for "'+t+'", got "'+e+'"')},boolean:function(e){return!!e},array:function(e){return[].concat(e)},object:function(e){return Object.assign({},e)},date:function(e){return new Date(e)},identity:n},f.types);if(p(e))return e;if(null==r[e])throw Error('Try to use unknown type "'+e+'" as type for "'+t+'"');return r[e]}function s(t,e){if(null!==(n=t)&&"[object Object]"===g(n)){if(p(t.construct))return t;if(b(t.type))return Object.assign({construct:a(t.type,e)},t);if(d(t.get)&&p(t.get[0])&&(p(t.get[1])||d(t.get[1])))return{getCacheKey:d(t.get[1])?(r=t.get[1],function(t){return r.map(function(e){return t[e]}).join("|<3|")}):t.get[1],get:t.get[0],set:t.set};if(p(t.get))return{getCacheKey:l,get:t.get,set:t.set,enumerable:t.enumerable||!1}}var r,n;if(d(t)&&2===t.length){var u=t[0],i=t[1];return{construct:a(u,e),required:i}}if(d(t)&&3===t.length){var o=t[0],c=t[1],f=t[2];return{construct:a(o,e),required:c,default:f}}if(p(t))return{construct:t};if(b(t))try{return{construct:a(t,e)}}catch(e){}try{return{construct:a(typeof t,e),required:!0,default:t}}catch(e){throw new Error("No proper config handler found for config:\n"+JSON.stringify(t))}}return f=Object.assign({},e,f),function(c,n){return n=Object.assign({},f,n),function(e){if(void 0===e&&(e={}),e._isInitialized)return e;var u={},i=l,o={};n.extraProperties&&(o=Object.assign({},e)),n.embedPlainData&&Object.defineProperty(o,"_data",{get:function(){return u},enumerable:!1}),Object.defineProperty(o,"_isInitialized",{get:function(){return!0},enumerable:!1}),o=n.preInit(o),i=n.onChangeListener(o);function t(r){var n=Object.assign({},y,s(c[r],r));if(Object.defineProperty(o,r,{enumerable:n.enumerable,get:function(){if(n.get){var e=n.getCacheKey(o);return u.hasOwnProperty(r)&&null!=e&&e===u[r].key||(u[r]={key:e,value:n.get(o)}),u[r].value}return o._data[r]},set:function(e){var t=o[r];p(n.set)?n.set(o,e):n.required||null!=e?u[r]=n.construct(e,o,n):u[r]=e=null,i(r,e,t)}}),null!=e[r])o[r]=e[r];else if(n.hasOwnProperty("default"))p(n.default)?o[r]=n.default():o[r]=n.default;else{if(n.required)throw Error("No value set for "+r);n.get||(o[r]=null)}}for(var r in c)t(r);return o=n.postInit(o),f.extraProperties||Object.seal(o),o}}}});
//# sourceMappingURL=modelz.min.js.map
