!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).modelz=t()}(this,function(){"use strict";function g(){}function n(e){return e}function l(e){return{}.toString.call(e)}function p(e){return"[object Array]"==l(e)}function y(e){return"function"==typeof e}function d(e){return"string"==typeof e}var b={construct:n,getCacheKey:g,enumerable:!0,required:!1},e={castString:!0,parseNumbers:!0,onChangeListener:function(){return g},extraProperties:!1,embedPlainData:!0,preInit:n,postInit:n,types:{}};return function(f){function a(e,t){var r=Object.assign({string:function(e){if(d(e))return e;if(f.castString)return""+e;throw Error('Expect a string for "'+t+'", got "'+e+'"')},number:function(e){if("number"==typeof e)return e;if(d(e)&&f.parseNumbers)return parseFloat(e);throw Error('Expect a number for "'+t+'", got "'+e+'"')},boolean:function(e){return!!e},array:function(e){return[].concat(e)},object:function(e){return Object.assign({},e)},date:function(e){return new Date(e)},identity:n},f.types);if(y(e))return e;if(null==r[e])throw Error('Try to use unknown type "'+e+'" as type for "'+t+'"');return r[e]}function s(t,e){if(null!==(n=t)&&"[object Object]"===l(n)){if(y(t.construct))return t;if(d(t.type))return Object.assign({construct:a(t.type,e)},t);if(p(t.get)&&y(t.get[0])&&(y(t.get[1])||p(t.get[1])))return{getCacheKey:p(t.get[1])?(r=t.get[1],function(t){return r.map(function(e){return t[e]}).join("|<3|")}):t.get[1],get:t.get[0],set:t.set};if(y(t.get))return{getCacheKey:g,get:t.get,set:t.set}}var r,n;if(p(t)&&2===t.length){var u=t[0],o=t[1];return{construct:a(u,e),required:o}}if(p(t)&&3===t.length){var i=t[0],c=t[1],f=t[2];return{construct:a(i,e),required:c,default:f}}if(y(t))return{construct:t};if(d(t))try{return{construct:a(t,e)}}catch(e){}try{return{construct:a(typeof t,e),required:!0,default:t}}catch(e){throw new Error("No proper config handler found for config:\n"+JSON.stringify(t))}}return f=Object.assign({},e,f),function(c,n){return n=Object.assign({},f,n),function(e){void 0===e&&(e={});var u={},o=g,i={};n.extraProperties&&(i=Object.assign({},e)),n.embedPlainData&&Object.defineProperty(i,"_data",{get:function(){return u},enumerable:!1}),i=n.preInit(i),o=n.onChangeListener(i);var t=function(r){if(c.hasOwnProperty(r)){var n=Object.assign({},b,s(c[r],r));if(e.hasOwnProperty(r))null==e[r]?u[r]=e[r]:u[r]=n.construct(e[r],i);else if(null===n.default)u[r]=n.default;else if(n.hasOwnProperty("default"))u[r]=n.construct(n.default,i);else if(n.required)throw Error("No value set for "+r);Object.defineProperty(i,r,{enumerable:!y(n.get)&&n.enumerable,get:function(){if(n.get){var e=n.getCacheKey(i);return u.hasOwnProperty(r)&&null!=e&&e===u[r].key||(u[r]={key:e,value:n.get(i)}),u[r].value}return i._data[r]},set:function(e){var t=i[r];y(n.set)?n.set(i,e):u[r]=e,o(r,e,t)}})}};for(var r in c)t(r);return i=n.postInit(i),f.extraProperties||Object.seal(i),i}}}});
//# sourceMappingURL=modelz.min.js.map
